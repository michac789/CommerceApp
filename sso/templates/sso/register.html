{% extends "layout/root.html" %}
{% load static %}

{% block title %}
    Register
{% endblock title %}

{% block script %}
    <link href="{% static 'sso/register.css' %}" rel="stylesheet">
    <script src="{% static "sso/register.js" %}" type="module"></script>
{% endblock script %}

{% block body %}
    <!--
        TODO
        - frontend check for password confirmation does not exist yet currently or it is not the same 
        - when the backend returns error also highlight in red the error field
        (ex: invalid username)
        - password check (not too simple??)
    -->
    
        <!-- <form action="{% url 'sso:register' %}" method="POST" class="needs-validation" novalidate>
            {% csrf_token %}
            <div class="form-group">
                <input class="form-control" autofocus required type="text" name="username" id="username" placeholder="Username" value="{{ username }}">
                <div class="valid-feedback">
                    Great!
                </div>
                <div class="invalid-feedback">
                    Please provide a username!
                </div>
            </div>
            <div class="form-group">
                <input class="form-control" required type="email" name="email" placeholder="Email Address" value="{{ email }}">
                <div class="valid-feedback">
                    Great!
                </div>
                <div class="invalid-feedback">
                    Please provide a valid email address!
                </div>
                <small id="emailHelp" class="form-text text-muted">
                    Your email won't be shown to public and will be used for verification purpose only.
                </small>
            </div>
            <div class="form-group">
                <input class="form-control" required type="password" name="password" placeholder="Password" required>
            </div>
            <div class="form-group">
                <input class="form-control" required type="password" name="confirmation" placeholder="Confirm Password" required>
            </div>
            <div class="form-group">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        I have read and agree to the
                        <a href="{% url 'sso:tc' %}" target="_blank">
                            terms and conditions
                        </a>
                    </label>
                    <div class="invalid-feedback">
                        You have to agree with the terms and conditions.
                    </div>
                </div>
            </div>
            <input class="btn btn-outline-primary" type="submit" value="Register">
        </form>

        {% if error %}        
            <div class="m-2 alert alert-danger">
                <span class="font-weight-normal">
                    {{ error }}
                </span>
            </div>
        {% endif %}
    </div> -->

    <div class="container-fluid" id="login-container">
        <div class="row justify-content-center align-items-center">
            <div class="card col-5" style="
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);"> 
            <!-- Need to be moved to local css -->
                <h5 class="card-header bg-white">Register <i class="bi bi-pencil-square"></i></h5>
                    <div class="card-body">
                        <form action="{% url 'sso:register' %}" method="POST" class="needs-validation" novalidate>
                            {% csrf_token %}
                            <div class="mb-3 form-group">
                                <label for="formControlName" class="form-label">Username: </label>
                                <input class="form-control" autofocus required type="text" name="username" id="username" value="{{ username }}">
                                <div class="valid-feedback">
                                    Great!
                                </div>
                                <div class="invalid-feedback">
                                    Please provide a username!
                                </div>
                            </div>
                            <div class="mb-3 form-group">
                                <label for="formControlEmail" class="form-label">Email address: </label>
                                <input class="form-control" required type="email" name="email" placeholder="Email Address" value="{{ email }}">
                                <div class="valid-feedback">
                                    Great!
                                </div>
                                <div class="invalid-feedback">
                                    Please provide a valid email address!
                                </div>
                                <small id="emailHelp" class="form-text text-muted mt-1 d-inline-block">
                                    Your email won't be shown to public and will be used for verification purpose only.
                                </small>
                            </div> 
                            <div class="mb-3 form-group">
                                <label for="formControlPassword" class="form-label">Password: </label>
                                <input class="form-control" required type="password" name="password" placeholder="Password" required>
                            </div> 
                            <div class="mb-3 form-group">
                                <label for="formControlConfirmation" class="form-label">Confirm password: </label>
                                <input class="form-control" required type="password" name="confirmation" placeholder="Confirm Password" required>
                            </div> 
                            <div class="form-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                    <label class="form-check-label" for="invalidCheck">
                                        I have read and agree to the
                                        <a href="{% url 'sso:tc' %}" target="_blank">
                                            terms and conditions
                                        </a>
                                    </label>
                                    <div class="invalid-feedback">
                                        You have to agree with the terms and conditions.
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-secondary mt-2" type="submit" value="Register">Register</button>
                        </form>
                        <!-- TODO STYLE ERROR -->
                        {% if error %}        
                        <div class="m-2 alert alert-danger">
                            <span class="font-weight-normal">
                                {{ error }}
                            </span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}